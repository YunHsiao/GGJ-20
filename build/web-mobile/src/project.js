System.register("chunks:///first-person-camera.js",["./_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,o,n,r,a,s,h,c,l,u,p,d,f,m,_,v,g,y,T,b,O,P,E,H,w,M,S,C,x,z,R,U,k,A,L,j,D,I,N,Q;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_descriptor8:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,n=t.classCallCheck,r=t.possibleConstructorReturn,a=t.getPrototypeOf,s=t.initializerDefineProperty,h=t.assertThisInitialized,c=t.createClass},function(t){l=t.cclegacy,u=t._decorator,p=t.math,d=t.Node,f=t.toRadian,m=t.systemEvent,_=t.SystemEvent,v=t.CameraComponent,g=t.renderer,y=t.game,T=t.Component}],execute:function(){l._RF.push({},"880b4w+I/RN1adeszn5EeG2","first-person-camera",void 0),U=u.ccclass,k=u.property,A=p.Vec2,L=p.Vec3,p.Quat,j=new A,D=new A,I=new L,N=new L,Q=new L,t("FirstPersonCamera",(b=k({type:d}),O=k({slide:!0,range:[.05,.5,.01]}),U((H=i((E=function(t){function e(){var t,i;n(this,e);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return i=r(this,(t=a(e)).call.apply(t,[this].concat(c))),s(i,"ground",H,h(i)),s(i,"moveSpeed",w,h(i)),s(i,"scrollSpeed",M,h(i)),s(i,"maxOrtheHeight",S,h(i)),s(i,"minOrtheHeight",C,h(i)),s(i,"panMaxPosition",x,h(i)),s(i,"panMinPosition",z,h(i)),s(i,"damp",R,h(i)),i.enableMoving=!0,i._position=new L,i._totalPanOffset=new L,i._currentPanOffset=new L,i._startPosition=null,i._isZooming=!1,i}return o(e,t),c(e,[{key:"onLoad",value:function(){this.node.eulerAngles=new L(-30,45,0);var t=.5*this.ground.scale.x;this._startPosition=this.node.position=new L(t,Math.SQRT2*t*Math.tan(f(30)),t),m.on(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.on(_.EventType.TOUCH_START,this.onTouchStart,this),m.on(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.on(_.EventType.TOUCH_END,this.onTouchEnd,this),L.copy(this._position,this.node.position),this._camera=this.node.getComponent(v)}},{key:"onDestroy",value:function(){m.off(_.EventType.MOUSE_WHEEL,this.onMouseWheel,this),m.off(_.EventType.TOUCH_START,this.onTouchStart,this),m.off(_.EventType.TOUCH_MOVE,this.onTouchMove,this),m.off(_.EventType.TOUCH_END,this.onTouchEnd,this)}},{key:"update",value:function(t){var e=this.maxOrtheHeight/this._camera.orthoHeight,i=new L(e,e/Math.SQRT2,1);L.multiply(N,this.panMinPosition,i),L.multiply(Q,this.panMaxPosition,i),L.add(I,this._totalPanOffset,this._currentPanOffset),L.transformQuat(I,I.clampf(N,Q),this.node.rotation),L.add(this._position,this._startPosition,I),L.lerp(I,this.node.position,this._position,t/this.damp),this.node.setPosition(I)}},{key:"onMouseWheel",value:function(t){var e=-t.getScrollY()*this.scrollSpeed*.1;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}},{key:"onTouchStart",value:function(t){this.enableMoving&&(t.getLocation(j),this._currentPanOffset.set(0,0,0),this._isZooming=j.x<.2*y.canvas.width)}},{key:"onTouchMove",value:function(t){if(this.enableMoving)if(t.getLocation(D),this._isZooming){t.getPreviousLocation(j),A.subtract(D,D,j);var e=-D.y*this.scrollSpeed*.5;this._camera.projection===g.CameraProjection.PERSPECTIVE?(L.transformQuat(I,L.UNIT_Z,this.node.rotation),L.scaleAndAdd(this._position,this.node.position,I,e)):(this._camera.orthoHeight+=.1*e,this._camera.orthoHeight=p.clamp(this._camera.orthoHeight,this.minOrtheHeight,this.maxOrtheHeight))}else{t.getStartLocation(j),t.getLocation(D),A.subtract(D,D,j);var i=this._camera.orthoHeight/this.maxOrtheHeight;this._currentPanOffset.x=-D.x*this.moveSpeed*i,this._currentPanOffset.y=-D.y*this.moveSpeed*i}}},{key:"onTouchEnd",value:function(t){this.enableMoving&&(this._totalPanOffset.add(this._currentPanOffset),this._currentPanOffset.set(0,0,0))}}]),e}(T)).prototype,"ground",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(E.prototype,"moveSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=i(E.prototype,"scrollSpeed",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=i(E.prototype,"maxOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 94}}),C=i(E.prototype,"minOrtheHeight",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),x=i(E.prototype,"panMaxPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(40,40,0)}}),z=i(E.prototype,"panMinPosition",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new L(-40,-40,0)}}),R=i(E.prototype,"damp",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=E))||P)),l._RF.pop()}}}));

System.register("chunks:///scripts/Advertisement.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,s;return{setters:[function(e){i=e.classCallCheck},function(e){s=e.cclegacy}],execute:function(){s._RF.push({},"e4489B+I19F2bTV5nP1dpk+","Advertisement",void 0),e("Advertisement",(function e(){i(this,e),this.index=0,this.price=10,this.range=10,this.attraction=10})),s._RF.pop()}}}));

System.register("chunks:///scripts/AdvParticle.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,r,n,o,a,c,l,s,p,u,d,v,f,y,h,m,_,b,C,P,g,A;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inherits,n=t.classCallCheck,o=t.possibleConstructorReturn,a=t.getPrototypeOf,c=t.initializerDefineProperty,l=t.assertThisInitialized,s=t.createClass},function(t){p=t.cclegacy,u=t._decorator,d=t.ParticleSystemComponent,v=t.AnimationComponent,f=t.Component}],execute:function(){p._RF.push({},"80528rXOztM8a29CMv51lE6","AdvParticle",void 0),g=u.ccclass,A=u.property,t("AdvParticle",(y=g("AdvParticle"),h=A({type:[d]}),m=A({type:v}),y((C=i((b=function(t){function e(){var t,i;n(this,e);for(var r=arguments.length,s=new Array(r),p=0;p<r;p++)s[p]=arguments[p];return i=o(this,(t=a(e)).call.apply(t,[this].concat(s))),c(i,"particles",C,l(i)),c(i,"animation",P,l(i)),i}return r(e,t),s(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.particles.forEach((function(t){return t.stop()}))}},{key:"play",value:function(){this.particles.forEach((function(t){return t.play()})),this.animation&&this.animation.play()}}]),e}(f)).prototype,"particles",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=i(b.prototype,"animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_)),p._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./AdvParticle.js"],(function(e,t){var r,i,n,o,a,l,s,c,d,p,u,v,P,f,h,_,b,m,y,w,g,A,C,z,k,x,D;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inherits,n=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,l=e.initializerDefineProperty,s=e.assertThisInitialized,c=e.createClass},function(e){d=e.cclegacy,p=e._decorator,u=e.Prefab,v=e.Pool,P=e.instantiate,f=e.Vec3,h=e.Component},function(e){_=e.AdvParticle}],execute:function(){d._RF.push({},"eb1e3K9ZpxPrYmqwGvtAc2Q","AdvertisementController",void 0),x=p.ccclass,D=p.property,e("AdvertisementController",(b=x("AdvertisementController"),m=D({type:u}),y=D({type:u}),w=D({type:u}),b((C=r((A=function(e){function t(){var e,r;n(this,t);for(var i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];return r=o(this,(e=a(t)).call.apply(e,[this].concat(c))),l(r,"advertiseParticlePrfb",C,s(r)),l(r,"advertiseParticlePrfbPaper",z,s(r)),l(r,"advertiseParticlePrfbAirship",k,s(r)),r._adParticle=null,r._showTime=0,r._particlePool=[],r}return i(t,e),c(t,[{key:"onLoad",value:function(){var e=this;this._particlePool[0]=new v((function(){var t=P(e.advertiseParticlePrfb);return t.parent=e.node.parent,t.active=!1,t.getComponent(_)}),5),this._particlePool[1]=new v((function(){var t=P(e.advertiseParticlePrfbPaper);return t.parent=e.node.parent,t.active=!1,t.getComponent(_)}),5),this._particlePool[2]=new v((function(){var t=P(e.advertiseParticlePrfbAirship);return t.parent=e.node.parent,t.active=!1,t.getComponent(_)}),5)}},{key:"start",value:function(){}},{key:"show",value:function(){var e=this,t=this._particlePool[this.advertisementData.index].alloc();t.node.active=!0,t.node.setWorldPosition(this.node.worldPosition.x,this.node.worldPosition.y+1,this.node.worldPosition.z),t.node.eulerAngles=new f(t.node.eulerAngles.x,30-150*Math.random(),t.node.eulerAngles.z),t.stop(),t.play(),this._showTime=8,this.node.active=!0,this.scheduleOnce((function(){t.node.active=!1,e._particlePool[e.advertisementData.index].free(t)}),this._showTime)}},{key:"update",value:function(e){}}]),t}(h)).prototype,"advertiseParticlePrfb",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(A.prototype,"advertiseParticlePrfbPaper",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(A.prototype,"advertiseParticlePrfbAirship",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=A))||g)),d._RF.pop()}}}));

System.register("chunks:///scripts/AdvertisementManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,s,c;return{setters:[function(e){n=e.createClass,s=e.classCallCheck},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"7be59zlN61PGoDHNcWNw5bg","AdvertisementManager",void 0),e("AdvertisementMananger",function(){function e(){s(this,e),this._activeAdvertisements=[]}return n(e,[{key:"update",value:function(e){}}]),e}()),c._RF.pop()}}}));

System.register("chunks:///scripts/AnimationHelper.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,i){var t,n,r,o,a,c,s,l,p,u,d,m,v,f,g,h,_,y,b,C,A,k,H,z;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,l=e.createClass},function(e){p=e.cclegacy,u=e._decorator,d=e.AnimationClip,m=e.Node,v=e.error,f=e.AnimationComponent,g=e.Component}],execute:function(){p._RF.push({},"dce39XbgiBBMrGErFxOkik/","AnimationHelper",void 0),H=u.ccclass,z=u.property,e("AnimationHelper",(h=H("AnimationHelper"),_=z([d]),y=z([m]),h((A=t((C=function(e){function i(){var e;return r(this,i),e=o(this,a(i).call(this)),c(e,"clips",A,s(e)),c(e,"targets",k,s(e)),i.instance&&v("animation helper can only be one instance."),i.instance=s(e),e}return n(i,e),l(i,null,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=this.instance.targets[e],n=this.instance.clips[i],r=t.getComponent(f);r||(r=t.addComponent(f)).createState(n),r.play(n.name)}}]),i}(g)).prototype,"clips",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=t(C.prototype,"targets",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=C))||b)),p._RF.pop()}}}));

System.register("chunks:///scripts/AudioManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,e){var i,o,s,r,n,c,a,u,l,_,p,h,f,d,A,v,g,M,S,y,D,I,O;return t({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0,ClipIndex:void 0}),{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inherits,s=t.classCallCheck,r=t.possibleConstructorReturn,n=t.getPrototypeOf,c=t.initializerDefineProperty,a=t.assertThisInitialized,u=t.createClass},function(t){l=t.cclegacy,_=t._decorator,p=t.AudioClip,h=t.AudioSourceComponent,f=t.tween,d=t.clamp,A=t.Component}],execute:function(){l._RF.push({},"597fbcoB5RPeKw2ziwoERSt","AudioManager",void 0),D=_.ccclass,I=_.property,function(t){t[t.BGM_1=0]="BGM_1",t[t.BGM_2=1]="BGM_2",t[t.BGM_3=2]="BGM_3",t[t.SCATTER=3]="SCATTER",t[t.GATHER=4]="GATHER",t[t.INVALID_OP=5]="INVALID_OP",t[t.VALID_OP=6]="VALID_OP",t[t.WIN=7]="WIN",t[t.AD_1=8]="AD_1",t[t.AD_2=9]="AD_2",t[t.AD_3=10]="AD_3",t[t.DEAL=11]="DEAL",t[t.OOS=12]="OOS"}(O||t("ClipIndex",O={})),t("AudioManager",(v=D("AudioManager"),g=I([p]),v((y=i((S=function(t){function e(){var t,i;s(this,e);for(var o=arguments.length,u=new Array(o),l=0;l<o;l++)u[l]=arguments[l];return i=r(this,(t=n(e)).call.apply(t,[this].concat(u))),c(i,"clips",y,a(i)),i._sources=[],i._curStage=O.BGM_1,i}return o(e,t),u(e,[{key:"start",value:function(){var t=this;this._sources=this.getComponents(h),this._sources[O.BGM_1].clip.on("started",(function(){f(t._sources[0]).to(2,{volume:1},{easing:"bounceInOut"}).start()})),e.instance=this}},{key:"setBGMStage",value:function(t){var e=this,i=d(Math.floor(3*t),O.BGM_1,O.BGM_3);if(i!==this._curStage){if(i>this._curStage)for(var o=function(t){e._sources[t].play(),e._sources[t].clip.on("started",(function(){f(e._sources[t]).to(2,{volume:1},{easing:"bounceInOut"}).start()}))},s=this._curStage+1;s<=i;s++)o(s);else for(var r=this._curStage-1;r>=i;r++)f(this._sources[r]).to(2,{volume:1},{easing:"bounceInOut"}).call((function(){return e._sources[0].stop()})).start();this._curStage=i}}},{key:"playOneShot",value:function(t){this._sources[0].playOneShot(this.clips[t])}}]),e}(A)).prototype,"clips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=S))||M)),l._RF.pop()}}}));

System.register("chunks:///scripts/BackUps/consumer.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,i){var o,n,e,s,a,r,h,l,c,u,p,d,m,y,C,v,w,g,f,x,D,L;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,n=t.classCallCheck,e=t.possibleConstructorReturn,s=t.getPrototypeOf,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,l=t.Vec3,c=t.Quat,u=t.random,p=t.SkeletalAnimationComponent,d=t.SkinningModelComponent,m=t.randomRangeInt,y=t.randomRange,C=t.Component}],execute:function(){r._RF.push({},"ad5a3CwjllK7IsMGpX7Pw4B","consumer",void 0),g=h.ccclass,h.property,f=new l,x=new l,D=new c,L=[8,7],t("Consumer",(v=g("Consumer"),v(w=function(t){function i(){var t,o;n(this,i);for(var a=arguments.length,r=new Array(a),h=0;h<a;h++)r[h]=arguments[h];return(o=e(this,(t=s(i)).call.apply(t,[this].concat(r)))).animComp=null,o.model=null,o.chemistry=u(),o.velocity=new l,o.targetRotation=new c,o.rotationLerpCountDown=1,o.nextTurn=-1,o.idle=!1,o.radius=0,o}return o(i,t),a(i,[{key:"start",value:function(){this.animComp=this.node.getComponent(p),this.model=this.node.getComponentInChildren(d);var t=[1/L[0],1/L[1]];t.push(m(0,L[0])*t[0]),t.push(m(0,L[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x,this.animComp.play(this.animComp.clips[m(0,this.animComp.clips.length)].name)}},{key:"update",value:function(t){this.nextTurn-=t,this.nextTurn<0&&(this.rotationLerpCountDown=2.1,this.idle=u()>this.chemistry,this.idle?this.velocity.set(0,0,0):this.velocity.set(u()-.5,0,u()-.5).normalize(),this.nextTurn=y(0,3));var i=this.node.position;l.add(f,i,l.multiplyScalar(f,this.velocity,5*t*(3*this.chemistry+1))),f.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):f.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),f.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):f.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),f.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):f.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(f),this.rotationLerpCountDown>2&&(c.fromViewUp(this.targetRotation,l.normalize(x,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(c.slerp(D,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t)}}]),i}(C))||w)),r._RF.pop()}}}));

System.register("chunks:///scripts/BackUps/crowd.js",["../../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(i,t){var e,n,s,o,a,r,c,l,h,u,d,p,v,f,m,y,g,w,b,A,_,z,x,F,R,k,C,S,B,D;return i({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_temp:void 0}),{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inherits,s=i.classCallCheck,o=i.possibleConstructorReturn,a=i.getPrototypeOf,r=i.initializerDefineProperty,c=i.assertThisInitialized,l=i.createClass},function(i){h=i.cclegacy,u=i._decorator,d=i.Vec3,p=i.Quat,v=i.Prefab,f=i.instantiate,m=i.randomRange,y=i.Component}],execute:function(){h._RF.push({},"ce6ecXDHJhBS4mB0UwZS22/","crowd",void 0),x=u.ccclass,F=u.property,R=new d,new d,k=new d,new p,C=function(i,t){var e=d.len(i);e>t&&d.multiplyScalar(i,i,t/e)},S=function(i,t,e,n,s){d.multiplyScalar(R,e,s/d.len(e)),C(d.subtract(R,R,t),n),d.add(i,i,R)},B=function i(){s(this,i),this.acceleration=new d,this.velocity=new d(m(-1,1),0,m(-1,1)).normalize(),this.position=new d(m(-1,1),0,m(-1,1)).normalize(),this.rotation=new p,this.idle=!1},D=function(){function i(){s(this,i),this.flockmateRadius=30,this.separationDistance=10,this.maxVelocity=.2,this.alignmentForce=.03,this.cohesionForce=.03,this.separationForce=.03,this.guideForce=.09,this.boids=[],this.boundingRadius=100,this.alignment=new d,this.cohesion=new d,this.separation=new d,this.guide=new d,this.alignmentActive=!1,this.cohesionActive=!1,this.separationActive=!1,this.guideActive=!1}return l(i,[{key:"addBoid",value:function(){var i=new B;d.multiplyScalar(i.position,i.position,m(1,this.boundingRadius)),this.boids.push(i)}},{key:"update",value:function(){for(var i=this.boids,t=this.flockmateRadius,e=this.separationDistance,n=this.maxVelocity,s=this.boundingRadius,o=this.alignmentForce,a=this.cohesionForce,r=this.separationForce,c=this.guideForce,l=this.alignment,h=this.cohesion,u=this.separation,v=this.guide,f=0,m=0;m<i.length;m++){var y=i[m];if(!y.idle){d.set(l,0,0,0),d.set(h,0,0,0),d.set(u,0,0,0),d.set(y.acceleration,0,0,0);for(var g=0;g<i.length;g++){var w=i[g];y!==w&&(d.subtract(R,w.position,y.position),(f=Math.max(.1,d.len(R)))<e&&(d.multiplyScalar(k,R,-1/f),d.add(u,u,k),this.separationActive=!0),f<t&&(d.add(h,h,R),this.cohesionActive=!0,d.add(l,l,w.idle?d.ZERO:w.velocity),this.alignmentActive=!0))}this.alignmentActive&&(S(y.acceleration,y.velocity,l,o,n),this.alignmentActive=!1),this.cohesionActive&&(S(y.acceleration,y.velocity,h,a,n),this.cohesionActive=!1),this.separationActive&&(S(y.acceleration,y.velocity,u,r,n),this.separationActive=!1),this.guideActive&&S(y.acceleration,y.velocity,v,c,n)}}for(var b=0;b<i.length;b++){var A=i[b],_=A.velocity,z=A.acceleration,x=A.position,F=A.rotation;A.idle||(C(d.add(_,_,z),n),d.add(x,x,_),x.x<-s?x.x+=2*s:x.x>s&&(x.x-=2*s),x.y<-s?x.y+=2*s:x.y>s&&(x.y-=2*s),x.z<-s?x.z+=2*s:x.z>s&&(x.z-=2*s),p.fromViewUp(F,d.normalize(R,_)))}}}]),i}(),i("Crowd",(g=x("Crowd"),w=F(v),g((_=e((A=function(i){function t(){var i,e;s(this,t);for(var n=arguments.length,l=new Array(n),h=0;h<n;h++)l[h]=arguments[h];return e=o(this,(i=a(t)).call.apply(i,[this].concat(l))),r(e,"count",_,c(e)),r(e,"prefab",z,c(e)),e.flock=new D,e.animComps=[],e.nextIdleSwitches=[],e.radius=0,e}return n(t,i),l(t,[{key:"start",value:function(){this.radius=.5*this.node.scene.getChildByName("Ground").scale.x;for(var i=0;i<this.count;i++){var t=f(this.prefab);t.setPosition(m(-this.radius,this.radius),0,m(-this.radius,this.radius)),t.parent=this.node}}}]),t}(y)).prototype,"count",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),z=e(A.prototype,"prefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=A))||b)),h._RF.pop()}}}));

System.register("chunks:///scripts/BlackPeopleEffect.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var r,c,i,o,n,a,l,s,p,u,f,y,h,v,d,_,k,P,E;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){r=e.applyDecoratedDescriptor,c=e.inherits,i=e.classCallCheck,o=e.possibleConstructorReturn,n=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){p=e.cclegacy,u=e._decorator,f=e.ParticleSystemComponent,y=e.Component}],execute:function(){p._RF.push({},"52aa8MPj8pBAoxxOxTE97KW","BlackPeopleEffect",void 0),P=u.ccclass,E=u.property,e("BlackPeopleEffect",(h=P("BlackPeopleEffect"),v=E({type:[f]}),h((k=r((_=function(e){function t(){var e,r;i(this,t);for(var c=arguments.length,s=new Array(c),p=0;p<c;p++)s[p]=arguments[p];return r=o(this,(e=n(t)).call.apply(e,[this].concat(s))),a(r,"particles",k,l(r)),r}return c(t,e),s(t,[{key:"start",value:function(){}},{key:"play",value:function(){this.particles.forEach((function(e){return e.loop=!0})),this.particles.forEach((function(e){return e.play()}))}},{key:"stop",value:function(){this.particles.forEach((function(e){return e.loop=!1}))}}]),t}(y)).prototype,"particles",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=_))||d)),p._RF.pop()}}}));

System.register("chunks:///scripts/ParcelDispenser.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var n,i,r,s,o,a,c,l,p,u,d,h,f,_,v,y,g,b,P,D,m,C,k,R;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,s=e.possibleConstructorReturn,o=e.getPrototypeOf,a=e.initializerDefineProperty,c=e.assertThisInitialized,l=e.createClass},function(e){p=e.cclegacy,u=e._decorator,d=e.Vec3,h=e.Prefab,f=e.instantiate,_=e.random,v=e.RigidBodyComponent,y=e.Component}],execute:function(){p._RF.push({},"4cdb8n2t9dPdqU47ID/eOlM","ParcelDispenser",void 0),C=u.ccclass,k=u.property,R=new d(0,2e3,0),e("ParcelDispenser",(g=C("ParcelDispenser"),b=k(h),g((m=n((D=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,l=new Array(i),p=0;p<i;p++)l[p]=arguments[p];return n=s(this,(e=o(t)).call.apply(e,[this].concat(l))),a(n,"prefab",m,c(n)),n.target=200,n._count=0,n._end=!1,n}return i(t,e),l(t,[{key:"start",value:function(){t.instance=this}},{key:"dispense",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=f(this.prefab);t.setPosition(_(),1,_()),t.setScale(250*_(),100,250*_()),t.parent=this.node,R.y=2e3*e,t.getComponent(v).applyForce(R)}},{key:"releaseAll",value:function(){this._end=!0}},{key:"update",value:function(){this._end&&this._count<5*this.target&&(this._count%5==0&&this.dispense(),this._count++)}}]),t}(y)).prototype,"prefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=D))||P)),p._RF.pop()}}}));

System.register("chunks:///scripts/CompanySuit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./ParcelDispenser.js"],(function(t,n){var o,e,i,a,r,s,c,p,l,u,m,d,h,C,_,g,y,f,v,F,R,w,I;return t({_dec:void 0,_class:void 0,_temp:void 0}),{setters:[function(t){o=t.inherits,e=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf,r=t.createClass},function(t){s=t.cclegacy,c=t._decorator,p=t.Vec3,l=t.Quat,u=t.SkeletalAnimationComponent,m=t.AnimationClip,d=t.AnimationComponent,h=t.SkinningModelComponent,C=t.ModelComponent,_=t.Color,g=t.Component},function(t){y=t.ParcelDispenser}],execute:function(){s._RF.push({},"36fc9bA6z9CiIzW6/3ChN0q","CompanySuit",void 0),F=c.ccclass,c.property,R=new p,w=new p(1,0,1),I=new l,t("CompanySuit",(f=F("CompanySuit"),f(v=function(t){function n(){var t,o;e(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(o=i(this,(t=a(n)).call.apply(t,[this].concat(s))))._interactFinished=!0,o._targetRotation=new l,o._rotationLerpCountDown=1,o}return o(n,t),r(n,[{key:"start",value:function(){var t=this;this.animComp=this.node.getComponent(u),this.animComp.getState("Root|Interact_standing").wrapMode=m.WrapMode.Normal,this.animComp.getState("Root|Interact_ground").wrapMode=m.WrapMode.Normal,this.animComp.on(d.EventType.FINISHED,(function(n,o){"Root|Interact_standing"===o.name?t._interactFinished||(t.animComp.crossFade("Root|Idle"),t._interactFinished=!0):"Root|Interact_ground"===o.name&&(t.getComponentInChildren(h).enabled=!1,t.node.getChildByName("Shadow").getComponent(C).material.setProperty("mainColor",_.BLACK),y.instance&&y.instance.releaseAll(),t._reactionFn())}))}},{key:"handWaving",value:function(t){this._reactionFn||(this._rotationLerpCountDown=3,l.fromViewUp(this._targetRotation,p.normalize(R,p.multiply(R,t,w))),this._interactFinished&&(this.animComp.crossFade("Root|Interact_standing"),this._interactFinished=!1))}},{key:"bailOut",value:function(t){this.animComp.crossFade("Root|Interact_ground"),this._reactionFn=t}},{key:"update",value:function(t){this._rotationLerpCountDown>0&&(l.slerp(I,this.node.rotation,this._targetRotation,.1),this.node.setRotation(I),this._rotationLerpCountDown-=t)}}]),n}(g))||v)),s._RF.pop()}}}));

System.register("chunks:///scripts/Unit.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(c,t){var n,e;return{setters:[function(c){n=c.classCallCheck},function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"cce73P0iJlB2bG821DIo9Cv","Unit",void 0),c("Unit",(function c(){n(this,c)})),e._RF.pop()}}}));

System.register("chunks:///scripts/Customer.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Unit.js"],(function(t,n){var r,c,e,i,a,o,s,u,l,f;return{setters:[function(t){r=t.inherits,c=t.createClass,e=t.classCallCheck,i=t.possibleConstructorReturn,a=t.getPrototypeOf},function(t){o=t.cclegacy,s=t.randomRangeInt,u=t.clamp},function(t){l=t.Unit}],execute:function(){o._RF.push({},"22944MG5Z5ODKm8KBuccvxJ","Customer",void 0),t("Customer",f=function(t){function n(){var t,r;e(this,n);for(var c=arguments.length,o=new Array(c),u=0;u<c;u++)o[u]=arguments[u];return(r=i(this,(t=a(n)).call.apply(t,[this].concat(o)))).baseAttraction=s(0,50),r._attraction=50,r}return r(n,t),c(n,[{key:"attraction",get:function(){return this._attraction},set:function(t){this._attraction=u(t,this.baseAttraction,n.maxAttraction)}}]),n}(l)),f.minAttraction=0,f.maxAttraction=100,o._RF.pop()}}}));

System.register("chunks:///scripts/Production.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(t,c){var i,s;return{setters:[function(t){i=t.classCallCheck},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"9c7b2I+us1GJIguT1jCCvt2","Production",void 0),t("Production",(function t(c,s,e){i(this,t),this.priceStateNum=5,this.price=c,this.count=s,this.cost=e,this.priceLow=c,this.pricePreGrad=(c-e)/this.priceStateNum})),s._RF.pop()}}}));

System.register("chunks:///scripts/Player.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./Production.js"],(function(e,t){var n,o,c,r,i,u,s,a;return e("createProductionCountType",void 0),{setters:[function(e){n=e.createClass,o=e.classCallCheck},function(e){c=e.cclegacy,r=e.loader,i=e.SpriteFrame},function(e){u=e.Production}],execute:function(){c._RF.push({},"c5fc281unpE6Zv91gX5ZI2F","Player",void 0),function(e){e[e.one=0]="one",e[e.ten=1]="ten",e[e.thirty=2]="thirty"}(s||e("createProductionCountType",s={})),a=["icon/plusx1/spriteFrame","icon/plusx10/spriteFrame","icon/plusx30/spriteFrame"],e("Player",function(){function e(){o(this,e),this.money=2e3,this.createCountTypeIcon=[],this.production=new u(200,0,100),this.createCountType=s.one;for(var t=this._loadCallBack.bind(this),n=0;n<a.length;n++)r.loadRes(a[n],i,t)}return n(e,[{key:"_loadCallBack",value:function(e,t){this.createCountTypeIcon.push(t)}}]),e}()),c._RF.pop()}}}));

System.register("chunks:///scripts/GameDefines.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,i){var r,t,n;return{setters:[function(e){r=e.createClass,t=e.classCallCheck},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"d944dKrK9xGIr1z9Nq2WvUX","GameDefines",void 0),e("gameDefines",new(function(){function e(){t(this,e),this.fallofSpeed=20,this.minTaxPriceThread=300,this.maxPrice=2e3}return r(e,[{key:"getTaxRateByPrice",value:function(e){if(e>this.minTaxPriceThread){var i=(e-this.minTaxPriceThread)/(this.maxPrice-this.minTaxPriceThread)*.9;return i=Number.parseFloat(i.toFixed(2)),console.log(i),i}return 0}}]),e}())),n._RF.pop()}}}));

System.register("chunks:///scripts/PlayerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","../first-person-camera.js","./Advertisement.js","./AdvertisementController.js","./AnimationHelper.js","./AudioManager.js","./Player.js","./GameDefines.js"],(function(e,t){var n,i,r,o,a,c,s,u,d,l,p,h,y,v,m,_,f,g,C,P,A,b,I,T,D,S,k,x,B,M,w,O,G,N,E,j,H,U,z,R,V,L,F,W,J,X,q,Z,K,Q,Y,$,ee,te,ne,ie;return e({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_dec7:void 0,_dec8:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_descriptor7:void 0,_temp:void 0}),{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inherits,r=e.classCallCheck,o=e.possibleConstructorReturn,a=e.getPrototypeOf,c=e.initializerDefineProperty,s=e.assertThisInitialized,u=e.createClass},function(e){d=e.cclegacy,l=e._decorator,p=e.geometry,h=e.Vec3,y=e.Prefab,v=e.LabelComponent,m=e.SpriteComponent,_=e.Node,f=e.CameraComponent,g=e.ModelComponent,C=e.instantiate,P=e.director,A=e.systemEvent,b=e.SystemEvent,I=e.loader,T=e.JsonAsset,D=e.PhysicsSystem,S=e.Component},function(e){k=e.FirstPersonCamera},function(e){x=e.Advertisement},function(e){B=e.AdvertisementController},function(e){M=e.AnimationHelper},function(e){w=e.AudioManager,O=e.ClipIndex},function(e){G=e.Player,N=e.createProductionCountType},function(e){E=e.gameDefines}],execute:function(){d._RF.push({},"c81a3oMr4BAqptDZXHT+JXH","PlayerController",void 0),ee=l.ccclass,te=l.property,ne=p.ray,ie=new ne,new h,e("PlayerController",(j=ee("PlayerController"),H=te({type:y}),U=te({type:y}),z=te({type:v}),R=te({type:v}),V=te({type:v}),L=te({type:m}),F=te({type:_}),j((X=n((J=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,u=new Array(i),d=0;d<i;d++)u[d]=arguments[d];return n=o(this,(e=a(t)).call.apply(e,[this].concat(u))),c(n,"rangeIndicatorPrfb",X,s(n)),c(n,"advertisementPrfb",q,s(n)),c(n,"customMoneyTips",Z,s(n)),c(n,"customProductionPriceTips",K,s(n)),c(n,"customProductionCountTips",Q,s(n)),c(n,"customProductionCountImage",Y,s(n)),c(n,"adButtonGroupNode",$,s(n)),n._advertisements=[],n._cameraBehavior=null,n._adButtonsGroup=[],n._curSelectAdIndex=-1,n}return i(t,e),u(t,[{key:"start",value:function(){var e=this;this.playerData=new G,this.initAd(),this._cameraNode=this.node.scene.getChildByName("Camera"),this._cameraComp=this._cameraNode.getComponent(f),this._groundNode=this.node.scene.getChildByName("Ground"),this._groundModelComp=this._groundNode.getComponent(g),this._rangeIndicator=C(this.rangeIndicatorPrfb),this._cameraBehavior=this._cameraNode.getComponent(k),this._rangeIndicator.parent=P.getScene(),this._rangeIndicator.active=!1,this.adButtonGroupNode.children.forEach((function(t){e._adButtonsGroup.push(t)})),A.on(b.EventType.TOUCH_START,this.onTouchStart.bind(this)),A.on(b.EventType.TOUCH_MOVE,this.onTouchMove.bind(this)),A.on(b.EventType.MOUSE_MOVE,this.onTouchMove.bind(this)),A.on(b.EventType.TOUCH_END,this.onTouchEnd.bind(this)),this.updateUITips()}},{key:"initAd",value:function(){var e=this;I.loadRes("configs/advertisements.json",T,(function(t,n){Array.isArray(n.json)&&n.json.forEach((function(t){var n=new x;n.index=t.index,n.price=t.price,n.range=t.range,n.range=t.range;var i=C(e.advertisementPrfb);i.parent=P.getScene(),i.active=!1;var r=i.getComponent(B);r.advertisementData=n,e._advertisements.push(r)}))}))}},{key:"update",value:function(e){}},{key:"raycastHitGround",value:function(e,t){var n=e.getLocation();this._cameraComp.screenPointToRay(n.x,n.y,ie);var i=D.instance.raycastResults;if(D.instance.raycast(ie))for(var r=0;r<i.length;r++){var o=i[r];if(o.collider.node.uuid===this._groundModelComp.node.uuid)return void(t&&t(o.hitPoint))}}},{key:"onTouchStart",value:function(e){}},{key:"onTouchMove",value:function(e){var t=this;this._curSelectedAd&&(this._rangeIndicator.active=!0,this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e)})))}},{key:"onTouchEnd",value:function(e){var t=this;this._curSelectedAd&&this.raycastHitGround(e,(function(e){t._rangeIndicator.setWorldPosition(e),t._curSelectedAd.advertisementData.price<=t.playerData.money?(t.playerData.money-=t._curSelectedAd.advertisementData.price,t.updateUITips(),t._curSelectedAd.node.setWorldPosition(e),t._curSelectedAd.show(),t.onDropAd(e,t._curSelectedAd),w.instance&&w.instance.playOneShot(O.AD_1+t._curSelectAdIndex)):M.play(0,0)}))}},{key:"updateUITips",value:function(){this.customMoneyTips.string=""+this.playerData.money,this.customProductionPriceTips.string=""+this.playerData.production.price,this.customProductionCountTips.string=""+this.playerData.production.count}},{key:"addProduction",value:function(){var e=0;switch(this.playerData.createCountType){case N.one:e=1;break;case N.ten:e=10;break;case N.thirty:e=30;break;default:e=1}if(this.playerData.money>=this.playerData.production.cost*e){for(var t=0;t<e;t++)this.playerData.money-=this.playerData.production.cost,this.playerData.production.count++;this.updateUITips(),w.instance&&w.instance.playOneShot(O.VALID_OP)}else w.instance.playOneShot(O.INVALID_OP),M.play(0,0)}},{key:"addPrice",value:function(){if(!(this.playerData.production.price>=E.maxPrice)){var e=this.playerData.production.price+this.playerData.production.pricePreGrad;e>E.maxPrice&&(e=E.maxPrice),this.playerData.production.price=e,this.onAddPrice&&this.onAddPrice(),this.updateUITips(),w.instance&&w.instance.playOneShot(O.VALID_OP)}}},{key:"subPrice",value:function(){this.playerData.production.price-=this.playerData.production.pricePreGrad,this.onSubPrice&&this.onSubPrice(),this.updateUITips(),w.instance&&w.instance.playOneShot(O.VALID_OP)}},{key:"onAdButtonClicked",value:function(e,t){e.target;var n,i=Number.parseInt(t);if(this._curSelectedAd===this._advertisements[i])this._curSelectedAd=null,this._cameraBehavior.enableMoving=!0,this._rangeIndicator.active=!1,this._curSelectAdIndex>=0&&((n=this._adButtonsGroup[this._curSelectAdIndex].getComponentInChildren(v)).node.parent.active=!1),this._curSelectAdIndex=-1;else{this._curSelectAdIndex>=0&&((n=this._adButtonsGroup[this._curSelectAdIndex].getComponentInChildren(v)).node.parent.active=!1),this._curSelectAdIndex=i,this._curSelectedAd=this._advertisements[i],this._cameraBehavior.enableMoving=!1;var r=this._curSelectedAd.advertisementData.range;this._rangeIndicator.setScale(new h(2*r,1,2*r)),this._curSelectAdIndex>=0&&((n=this._adButtonsGroup[this._curSelectAdIndex].getComponentInChildren(v)).string="-"+this._curSelectedAd.advertisementData.price,n.node.parent.active=!0)}}},{key:"switchCreateCountType",value:function(e,t){if(0===Number.parseInt(t)){if(this.playerData.createCountType===N.one)return;this.playerData.createCountType--}else{if(this.playerData.createCountType===N.thirty)return;this.playerData.createCountType++}this.customProductionCountImage.spriteFrame=this.playerData.createCountTypeIcon[this.playerData.createCountType]}}]),t}(S)).prototype,"rangeIndicatorPrfb",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(J.prototype,"advertisementPrfb",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(J.prototype,"customMoneyTips",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(J.prototype,"customProductionPriceTips",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(J.prototype,"customProductionCountTips",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=n(J.prototype,"customProductionCountImage",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(J.prototype,"adButtonGroupNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=J))||W)),d._RF.pop()}}}));

System.register("chunks:///scripts/GameManager.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./AudioManager.js","./ParcelDispenser.js","./CompanySuit.js","./GameDefines.js","./PlayerController.js"],(function(t,e){var r,a,i,o,n,s,l,u,c,p,d,h,y,f,m,g,v,C,_,b,P,D,A,R,x,S,k,I,B,w,O,z,G,L,M,j,N,W,E,T;return t({_dec:void 0,_dec2:void 0,_dec3:void 0,_dec4:void 0,_dec5:void 0,_dec6:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_descriptor2:void 0,_descriptor3:void 0,_descriptor4:void 0,_descriptor5:void 0,_descriptor6:void 0,_temp:void 0}),{setters:[function(t){r=t.applyDecoratedDescriptor,a=t.inherits,i=t.classCallCheck,o=t.possibleConstructorReturn,n=t.getPrototypeOf,s=t.initializerDefineProperty,l=t.assertThisInitialized,u=t.createClass},function(t){c=t.cclegacy,p=t._decorator,d=t.Vec3,h=t.Prefab,y=t.ProgressBarComponent,f=t.LabelComponent,m=t.instantiate,g=t.randomRange,v=t.Component},function(t){C=t.AudioManager,_=t.ClipIndex},function(t){b=t.ParcelDispenser},function(t){P=t.CompanySuit},function(t){D=t.gameDefines},function(t){A=t.PlayerController}],execute:function(){c._RF.push({},"3c34cCllvlGCIKOWNIuqna3","GameManager",void 0),W=p.ccclass,E=p.property,T=new d,t("GameManager",(R=W("GameManager"),x=E({type:A}),S=E({type:h}),k=E({type:h}),I=E({type:y}),B=E({type:f}),R((z=r((O=function(t){function e(){var t,r;i(this,e);for(var a=arguments.length,u=new Array(a),c=0;c<a;c++)u[c]=arguments[c];return r=o(this,(t=n(e)).call.apply(t,[this].concat(u))),s(r,"playerCtrl",z,l(r)),s(r,"customerPrfb",G,l(r)),s(r,"companySuit",L,l(r)),s(r,"customerCount",M,l(r)),s(r,"gameProgress",j,l(r)),s(r,"taxRateLabel",N,l(r)),r._customers=[],r._falloffInterval=1,r._curFalloffTime=0,r._companySuitInst=null,r._customerBought=0,r._gameOver=!1,r._taxRate=0,r}return a(e,t),u(e,[{key:"onLoad",value:function(){e._instance=this}},{key:"start",value:function(){this._groundNode=this.node.scene.getChildByName("Ground"),this.playerCtrl.onDropAd=this.onDropAd.bind(this),this.playerCtrl.onAddPrice=this.onAddPrice.bind(this),this.playerCtrl.onSubPrice=this.onSubPrice.bind(this),this.initCustomers();var t=m(this.companySuit);t.parent=this.node,this._companySuitInst=t.getComponent(P),this.gameProgress.progress=0}},{key:"initCustomers",value:function(){for(var t=.5*this._groundNode.scale.x,e=0;e<this.customerCount;e++){var r=m(this.customerPrfb);r.setPosition(g(-t,t),0,g(-t,t)),r.parent=this.node;var a=r.getComponent("CustomerController");a.onBuyProduction=this.onCustomBuyProduction.bind(this),this._customers.push(a)}}},{key:"onDropAd",value:function(t,e){this._companySuitInst.handWaving(t);var r=[];this._customers.forEach((function(a){d.subtract(T,t,a.node.getWorldPosition()),T.length()<=e.advertisementData.range&&r.push(a)}));var a=e.advertisementData.attraction;if(r.length>=2){var i=0;for(i=r.length-1;i>=1;i-=2){var o=r[i],n=r[i-1],s=g(-a,a),l=2*a-s;o.addAttraction(s),n.addAttraction(l)}0===i&&r[0].addAttraction(a)}else 1===r.length&&r[0].addAttraction(a)}},{key:"falloffAllCustomers",value:function(t){this._customers.forEach((function(e){e.addAttraction(t)}))}},{key:"falloffAllCustomersInRange",value:function(t,e,r){this._customers.forEach((function(a){a!==e&&(d.subtract(T,e.node.getWorldPosition(),a.node.getWorldPosition()),T.length()<=r&&a.addAttraction(t))}))}},{key:"update",value:function(t){this.falloffAllCustomers(-D.fallofSpeed*t),C.instance.setBGMStage(this.gameProgress.progress),this.gameProgress.progress>=.99&&this.gameOver()}},{key:"gameOver",value:function(){var t=this;this._gameOver||(this._gameOver=!0,this._companySuitInst.bailOut((function(){return t._customers.forEach((function(t){return t.bewildered()}))})),C.instance.playOneShot(_.WIN))}},{key:"onCustomBuyProduction",value:function(t){var e=this.playerCtrl.playerData.production.count-1;if(e>=0){this.playerCtrl.playerData.production.count=e,this._customerBought++,this.gameProgress.progress=this._customerBought/this.customerCount;var r=Math.floor(this.playerCtrl.playerData.production.price*(1-this.taxRate));this.playerCtrl.playerData.money+=r,this.playerCtrl.updateUITips(),b.instance.dispense(g(.5,1))}}},{key:"onAddPrice",value:function(){this._customers.forEach((function(t){t.addAttraction(-20),t.repel()})),this.taxRate=D.getTaxRateByPrice(this.playerCtrl.playerData.production.price)}},{key:"onSubPrice",value:function(){var t=0;this.playerCtrl.playerData.production.price>this.playerCtrl.playerData.production.cost/2&&this.playerCtrl.playerData.production.price<this.playerCtrl.playerData.production.priceLow&&(t=g(40,200)/this.playerCtrl.playerData.production.priceStateNum,this.playerCtrl.playerData.production.priceLow=this.playerCtrl.playerData.production.price),this.falloffAllCustomers(t),this.taxRate=D.getTaxRateByPrice(this.playerCtrl.playerData.production.price)}},{key:"queryProductionCount",value:function(){return this.playerCtrl.playerData.production.count}},{key:"taxRate",get:function(){return this._taxRate},set:function(t){this._taxRate=t,this.taxRateLabel&&(this.taxRateLabel.string=(100*this._taxRate).toFixed(0)+"%")}}],[{key:"Instance",get:function(){return e._instance}}]),e}(v)).prototype,"playerCtrl",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=r(O.prototype,"customerPrfb",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=r(O.prototype,"companySuit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(O.prototype,"customerCount",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),j=r(O.prototype,"gameProgress",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=r(O.prototype,"taxRateLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=O))||w)),c._RF.pop()}}}));

System.register("chunks:///scripts/CustomerController.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./AnimationHelper.js","./AudioManager.js","./Customer.js","./GameManager.js"],(function(t,i){var e,o,a,s,n,r,l,c,h,u,d,m,p,D,y,f,C,R,v,I,E,L,_,g,k,B,A,b,O,w;return t({_dec:void 0,_class:void 0,_temp:void 0,CustomerStates:void 0}),{setters:[function(t){e=t.inherits,o=t.classCallCheck,a=t.possibleConstructorReturn,s=t.getPrototypeOf,n=t.createClass},function(t){r=t.cclegacy,l=t._decorator,c=t.Vec3,h=t.Quat,u=t.randomRange,d=t.SkeletalAnimationComponent,m=t.SkinningModelComponent,p=t.ModelComponent,D=t.randomRangeInt,y=t.random,f=t.Component},function(t){C=t.AnimationHelper},function(t){R=t.AudioManager,v=t.ClipIndex},function(t){I=t.Customer},function(t){E=t.GameManager}],execute:function(){r._RF.push({},"b01d7JfclREB68N4VGM53e5","CustomerController",void 0),g=l.ccclass,l.property,k=new c,B=new c,A=new h,t("textureCounts",b=[8,7]),O=[1,1,1,1],function(t){t[t.IDLE=0]="IDLE",t[t.ROAMING=1]="ROAMING",t[t.HOOKED=2]="HOOKED",t[t.DEAL=3]="DEAL",t[t.BEWILDERED=4]="BEWILDERED"}(w||(w={})),t("CustomerController",(L=g("CustomerController"),L(_=function(t){function i(){var t,e;o(this,i);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a(this,(t=s(i)).call.apply(t,[this].concat(r)))).animComp=null,e.moodBillBoard=null,e.model=null,e.state=w.IDLE,e.velocity=new c,e.targetRotation=new h,e.targetDealDistance=u(5,15),e.rotationLerpCountDown=1,e.nextTurn=-1,e.radius=0,e._isBlack=!1,e._curBlackPassedTime=0,e._blackLastTime=3,e._falloffRange=5,e._falloffAttraction=5,e}return e(i,t),n(i,[{key:"start",value:function(){this.customerData=new I,this.animComp=this.node.getComponent(d),this.model=this.node.getComponentInChildren(m),this.moodBillBoard=this.node.getChildByName("mood").getComponent(p),this.moodBillBoard.setInstancedAttribute("a_tiling_offset",[1,1,0,0]),this.moodBillBoard.enabled=!1,this._blackRangeIndicator=this.node.getChildByName("BlackRangeIndicator");var t=[1/b[0],1/b[1]];t.push(D(0,b[0])*t[0]),t.push(D(0,b[1])*t[1]),this.model.setInstancedAttribute("a_tiling_offset",t),this.radius=.5*this.node.scene.getChildByName("Ground").scale.x}},{key:"update",value:function(t){var i=this;if(this.nextTurn-=t,this.nextTurn<0&&(this.state===w.IDLE||this.state===w.ROAMING)){var e=y()>.01*this.customerData.attraction;e&&this.state===w.ROAMING?(this.velocity.set(0,0,0),this.animComp.play("Root|Idle"),this.state=w.IDLE):e||this.state!==w.IDLE||(this.velocity.set(y()-.5,0,y()-.5).normalize(),this.animComp.play(this.customerData.attraction>20?"Root|Run":"Root|Walk"),this.state=w.ROAMING),this.rotationLerpCountDown=2.1,this.nextTurn=u(0,3)}var o=this.node.position;switch(this.state){case w.HOOKED:var a=o.length();this.velocity.set(o).multiplyScalar(-1/a),this.rotationLerpCountDown=2.1,a<this.targetDealDistance&&(this.buyProduction()?(this.state=w.DEAL,this.animComp.play("Root|Interact_ground"),R.instance.playOneShot(v.DEAL)):(this.state=w.ROAMING,this.velocity.set(o).multiplyScalar(1/a),this.nextTurn=2,this.moodBillBoard.enabled=!0,setTimeout((function(){return i.moodBillBoard.enabled=!1}),1e3*this.nextTurn),R.instance.playOneShot(v.OOS),C.play(1,0)));case w.ROAMING:c.add(k,o,c.multiplyScalar(k,this.velocity,5*t*(.03*this.customerData.attraction+1))),k.x<-this.radius?(this.velocity.x=Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1):k.x>this.radius&&(this.velocity.x=-Math.abs(this.velocity.x),this.rotationLerpCountDown=2.1),k.y<-this.radius?(this.velocity.y=Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1):k.y>this.radius&&(this.velocity.y=-Math.abs(this.velocity.y),this.rotationLerpCountDown=2.1),k.z<-this.radius?(this.velocity.z=Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1):k.z>this.radius&&(this.velocity.z=-Math.abs(this.velocity.z),this.rotationLerpCountDown=2.1),this.node.setPosition(k),this.rotationLerpCountDown>2&&(h.fromViewUp(this.targetRotation,c.normalize(B,this.velocity)),this.rotationLerpCountDown=2),this.rotationLerpCountDown>0&&(this.node.setRotation(h.slerp(A,this.node.rotation,this.targetRotation,.1)),this.rotationLerpCountDown-=t);case w.IDLE:O[0]=O[1]=O[2]=Math.min(.02*this.customerData.attraction,1),this.model.setInstancedAttribute("a_color_instanced",O);break;case w.DEAL:case w.BEWILDERED:}if(this._isBlack)if(this._curBlackPassedTime+=t,this._curBlackPassedTime>this._blackLastTime)this._blackRangeIndicator.active=!1,this._isBlack=!1;else{var s=this._falloffAttraction*t;E.Instance.falloffAllCustomersInRange(s,this,this._falloffAttraction)}}},{key:"bewildered",value:function(){this.state=w.BEWILDERED,this.animComp.play("Root|Idle")}},{key:"addAttraction",value:function(t){var i=this.customerData.attraction+t;switch(this.customerData.attraction=i,this.state){case w.IDLE:case w.ROAMING:i>50&&(this.state=w.HOOKED,this.animComp.play("Root|Run"));break;case w.HOOKED:i<=50&&(this.state=w.IDLE,this.animComp.play("Root|Idle"));break;case w.DEAL:case w.BEWILDERED:}}},{key:"repel",value:function(){switch(this.state){case w.IDLE:this.animComp.play("Root|Run");case w.HOOKED:this.state=w.ROAMING;case w.ROAMING:this.nextTurn=2*y(),this.velocity.set(this.node.position).normalize();break;case w.DEAL:case w.BEWILDERED:}}},{key:"buyProduction",value:function(){if(E.Instance.queryProductionCount()<=0){var t=this.customerData.baseAttraction;return this.customerData.attraction=this.customerData.baseAttraction=Math.floor(.8*t),this.checkTurnToBlack(),!1}return this.onBuyProduction&&this.onBuyProduction(this),!0}},{key:"checkTurnToBlack",value:function(){this._isBlack||this.customerData.baseAttraction<30&&(this._isBlack=!0,this._falloffRange=D(5,20),this._falloffAttraction=D(5,10),this._blackLastTime=D(2,10),this._blackRangeIndicator.setScale(new c(this._falloffRange,1,this._falloffRange)),this._blackRangeIndicator.active=!0)}}]),i}(f))||_)),r._RF.pop()}}}));

System.register("chunks:///scripts/HelpActive.js",["../_virtual/_rollupPluginBabelHelpers.js","cc","./GameManager.js"],(function(e,t){var i,n,c,o,r,a,l,s,u,p,v,h,d,f,y,_,g,m,N,b;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,n=e.inherits,c=e.classCallCheck,o=e.possibleConstructorReturn,r=e.getPrototypeOf,a=e.initializerDefineProperty,l=e.assertThisInitialized,s=e.createClass},function(e){u=e.cclegacy,p=e._decorator,v=e.Node,h=e.Component},function(e){d=e.GameManager}],execute:function(){u._RF.push({},"76675fVG85DBb93A3RjL2uM","HelpActive",void 0),N=p.ccclass,b=p.property,e("HelpActive",(f=N("HelpActive"),y=b({type:v}),f((m=i((g=function(e){function t(){var e,i;c(this,t);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return i=o(this,(e=r(t)).call.apply(e,[this].concat(s))),a(i,"helpNode",m,l(i)),i}return n(t,e),s(t,[{key:"start",value:function(){var e=this;this.helpNode.active=!0,this.scheduleOnce((function(){e.helpNode.active=!1}),10)}},{key:"visableChange",value:function(){this.helpNode.active=!this.helpNode.active}},{key:"hide",value:function(){this.helpNode.active=!1}},{key:"outGame",value:function(){d.Instance.gameOver()}}]),t}(h)).prototype,"helpNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=g))||_)),u._RF.pop()}}}));

System.register("chunks:///scripts/SelectState.js",["../_virtual/_rollupPluginBabelHelpers.js","cc"],(function(e,t){var i,r,s,a,c,n,o,l,u,p,v,d,f,h,m,y,k,_,S;return e({_dec:void 0,_dec2:void 0,_class:void 0,_class2:void 0,_descriptor:void 0,_temp:void 0}),{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inherits,s=e.classCallCheck,a=e.possibleConstructorReturn,c=e.getPrototypeOf,n=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createClass},function(e){u=e.cclegacy,p=e._decorator,v=e.Node,d=e.Component}],execute:function(){u._RF.push({},"e58a0feKyxNgbw4dpS+YavV","SelectState",void 0),_=p.ccclass,S=p.property,e("SelectState",(f=_("SelectState"),h=S({type:[v]}),f((k=i((y=function(e){function t(){var e,i;s(this,t);for(var r=arguments.length,l=new Array(r),u=0;u<r;u++)l[u]=arguments[u];return i=a(this,(e=c(t)).call.apply(e,[this].concat(l))),n(i,"masks",k,o(i)),i}return r(t,e),l(t,[{key:"start",value:function(){}},{key:"onClickAdv",value:function(e,t){!0===this.masks[Number(t)].active?this.masks[Number(t)].active=!1:(this.masks.forEach((function(e){return e.active=!1})),this.masks[Number(t)].active=!0)}}]),t}(d)).prototype,"masks",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=y))||m)),u._RF.pop()}}}));

System.register("chunks:///_virtual/prerequisite-imports:main",["../first-person-camera.js","../scripts/Advertisement.js","../scripts/AdvParticle.js","../scripts/AdvertisementController.js","../scripts/AdvertisementManager.js","../scripts/AnimationHelper.js","../scripts/AudioManager.js","../scripts/BackUps/consumer.js","../scripts/BackUps/crowd.js","../scripts/BlackPeopleEffect.js","../scripts/ParcelDispenser.js","../scripts/CompanySuit.js","../scripts/Unit.js","../scripts/Customer.js","../scripts/Production.js","../scripts/Player.js","../scripts/GameDefines.js","../scripts/PlayerController.js","../scripts/GameManager.js","../scripts/CustomerController.js","../scripts/HelpActive.js","../scripts/SelectState.js"],(function(s,t){return{setters:[function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){},function(s){}],execute:function(){}}}));

(function(r) {
  r('project:///assets/first-person-camera.js', 'chunks:///first-person-camera.js');
  r('project:///assets/scripts/Advertisement.js', 'chunks:///scripts/Advertisement.js');
  r('project:///assets/scripts/AdvParticle.js', 'chunks:///scripts/AdvParticle.js');
  r('project:///assets/scripts/AdvertisementController.js', 'chunks:///scripts/AdvertisementController.js');
  r('project:///assets/scripts/AdvertisementManager.js', 'chunks:///scripts/AdvertisementManager.js');
  r('project:///assets/scripts/AnimationHelper.js', 'chunks:///scripts/AnimationHelper.js');
  r('project:///assets/scripts/AudioManager.js', 'chunks:///scripts/AudioManager.js');
  r('project:///assets/scripts/BackUps/consumer.js', 'chunks:///scripts/BackUps/consumer.js');
  r('project:///assets/scripts/BackUps/crowd.js', 'chunks:///scripts/BackUps/crowd.js');
  r('project:///assets/scripts/BlackPeopleEffect.js', 'chunks:///scripts/BlackPeopleEffect.js');
  r('project:///assets/scripts/ParcelDispenser.js', 'chunks:///scripts/ParcelDispenser.js');
  r('project:///assets/scripts/CompanySuit.js', 'chunks:///scripts/CompanySuit.js');
  r('project:///assets/scripts/Unit.js', 'chunks:///scripts/Unit.js');
  r('project:///assets/scripts/Customer.js', 'chunks:///scripts/Customer.js');
  r('project:///assets/scripts/Production.js', 'chunks:///scripts/Production.js');
  r('project:///assets/scripts/Player.js', 'chunks:///scripts/Player.js');
  r('project:///assets/scripts/GameDefines.js', 'chunks:///scripts/GameDefines.js');
  r('project:///assets/scripts/PlayerController.js', 'chunks:///scripts/PlayerController.js');
  r('project:///assets/scripts/GameManager.js', 'chunks:///scripts/GameManager.js');
  r('project:///assets/scripts/CustomerController.js', 'chunks:///scripts/CustomerController.js');
  r('project:///assets/scripts/HelpActive.js', 'chunks:///scripts/HelpActive.js');
  r('project:///assets/scripts/SelectState.js', 'chunks:///scripts/SelectState.js');
  r('virtual:///prerequisite-imports:main', 'chunks:///_virtual/prerequisite-imports:main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    var _m;
    return {
        setters: [function(m) { _m = m; }],
        execute: function () { _export(_m); }
    };
    });
});